{% extends 'mainapp/base.html' %}
{% load static %}
{% block title %}Stage 1{% endblock %}

{% block extrahead %}
    <link rel="stylesheet" href="{% static 'mainapp/css/stage1.css' %}" media="screen">
{% endblock %}

{% block body %}
  <body class="u-body">

    <section class="u-clearfix u-section-1" id="sec-12f7">
      <div class="u-clearfix u-sheet u-valign-middle u-sheet-1">
        <div class="u-clearfix u-expanded-width u-gutter-0 u-layout-spacing-vertical u-layout-wrap u-layout-wrap-1">
          <div class="u-layout">
            <div class="u-layout-row">
              <div class="u-align-left u-container-style u-layout-cell u-left-cell u-size-40 u-layout-cell-1">
                <div class="u-container-layout u-valign-middle u-container-layout-1">
                  <h2 class="u-text u-text-1">RewardsPay Stage 1</h2>
                  <p class="u-text u-text-2">RewardsPay is fully integrated with Algorand Blockchain to provide payment and securely storing customer identities.</p>
                  <a href="#pop-newk-stat" class="u-btn u-button-style u-dialog-link u-btn-1">Check Algorand Network Status</a>
                  <h3 class="u-text u-text-3">Upload to IPFS&nbsp;</h3>
                  <!-- ipfs file upload -->
                  <div class="ipfs-form">
                    <input type="file" id="upload">
                    <div id="link"></div>
                    <p><a href="/std-account/">Click here to see the current account list</a></p>
                  </div>
                </div>
              </div>
              <div class="u-container-style u-image u-layout-cell u-right-cell u-size-20 u-image-1" src="" data-image-width="600" data-image-height="600">
                <div class="u-container-layout u-container-layout-2"></div>
              </div>
            </div>
          </div>
        </div>
      </div>


    </section>

    <section class="u-align-center u-black u-clearfix u-container-style u-dialog-block u-opacity u-opacity-70 u-section-4"
           id="pop-newk-stat">
      <div class="u-container-style u-dialog u-gradient u-radius-13 u-shape-round u-dialog-1">
          <div class="u-container-layout u-valign-middle u-container-layout-1"><span
                  class="u-icon u-icon-circle u-text-palette-1-base u-icon-1"><svg class="u-svg-link"
                                                                                   preserveAspectRatio="xMidYMin slice"
                                                                                   viewBox="0 0 508.1 508.1" style=""><use
                  xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#svg-86cc"></use></svg><svg
                  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1"
                  xml:space="preserve" class="u-svg-content" viewBox="0 0 508.1 508.1" x="0px" y="0px" id="svg-86cc"
                  style="enable-background:new 0 0 508.1 508.1;"><path style="fill:#F6B44B;" d="M217.4,407.45c-2.4,4.6-5.2,9.1-8.2,13.3c-4.2,5.9-8.8,11.3-13.9,16.4  c-23.5,23.5-56.1,37.8-92.5,37.2c-0.1-7.5,0.6-14.9,1.7-22c-19.2,11-41.5,17.2-65.6,16.8c-0.3-24.1,5.9-46.4,16.8-65.6  c-7.1,1.1-14.5,1.8-22,1.6c-0.6-44.1,20.6-82.9,53.6-106.4c4.2-3,8.7-5.8,13.3-8.2c-0.1,0.5-0.2,1.1-0.3,1.6  c11.4,1.5,22.6,4.5,33.4,9c7.1,2.9,13.9,6.4,20.5,10.6c8.3,5.2,16.1,11.4,23.3,18.6s13.3,15,18.5,23.3c4.2,6.6,7.8,13.4,10.7,20.5  c4.5,10.8,7.5,22,9,33.4C216.4,407.65,216.9,407.55,217.4,407.45z"></path><path
                  style="fill:#FFD05C;"
                  d="M206.8,374.35c-4.7,17.7-13.9,33.9-27.1,47.1c-14.5,14.5-32.6,24.2-52.3,28.4l6.1-39.6l-40,22.8  c-9.3,5.4-19.4,9.2-30,11.5c2.3-10.5,6.2-20.6,11.5-30l22.8-40l-39.6,6.1c4.2-19.7,13.9-37.8,28.4-52.3  c13.2-13.2,29.4-22.4,47.1-27.1c7.1,2.9,13.9,6.4,20.5,10.6c8.3,5.2,16.1,11.4,23.3,18.6s13.3,15,18.5,23.3  C200.3,360.45,203.9,367.25,206.8,374.35z"></path><path
                  style="fill:#41596B;"
                  d="M200.7,508.05c2.6-2.2,5.3-4.6,7.8-7.2c25.1-25.1,38.8-57.2,41.2-90.1c3-39.8-10.7-80.7-41.2-111.2  s-71.3-44.2-111.2-41.2c-32.8,2.4-65,16.1-90.1,41.2c-2.5,2.5-4.9,5.2-7.2,7.8c4.8-38.3,21.8-75.4,51.2-104.8  c27.5-27.5,61.6-44.2,97.1-50.2c55.4-9.3,114.3,7.4,157.1,50.2c42.7,42.7,59.5,101.7,50.2,157.1c-6,35.6-22.7,69.7-50.2,97.1  C276.1,486.25,239,503.25,200.7,508.05z"></path><path
                  style="fill:#334A5E;"
                  d="M355.7,359.75c-32,22.1-67.6,39.6-105.9,51.1c3-39.8-10.7-80.7-41.2-111.2s-71.3-44.2-111.2-41.2  c11.5-38.4,29-74,51.1-105.9c55.4-9.3,114.3,7.4,157.1,50.2C348.2,245.35,365,304.35,355.7,359.75z"></path><path
                  style="fill:#F2705B;"
                  d="M215.9,407.75c-2.6-18.9-9.1-37.3-19.7-53.9c-5.2-8.3-11.4-16.1-18.6-23.3  c-7.2-7.2-15-13.4-23.3-18.6c-16.6-10.6-35-17.1-53.9-19.7c29.8-143.3,143.1-256.1,286.8-285c23.5-4.7,47.8-7.2,72.8-7.2h48.1v48.1  c0,24.9-2.5,49.3-7.2,72.8C472,264.65,359.2,377.95,215.9,407.75z"></path><path
                  style="fill:#FFFFFF;"
                  d="M397.6,110.55c-31.4-31.4-82.3-31.4-113.7,0c-15.7,15.7-23.6,36.3-23.5,56.9  c0.1,20.5,7.9,41.1,23.5,56.7s36.1,23.5,56.6,23.6c20.7,0.1,41.3-7.8,57-23.6C429,192.85,429,141.95,397.6,110.55z"></path><circle
                  style="fill:#89D6F7;" cx="340.8" cy="167.35" r="53.5"></circle><path style="fill:#41596B;"
                                                                                       d="M248.9,259.25L248.9,259.25L248.9,259.25c-53.5,18.8-112.1,77.4-130.8,130.8l0,0  C171.5,371.25,230.1,312.75,248.9,259.25z"></path><path
                  style="fill:#334A5E;"
                  d="M500.9,120.95L387.2,7.25c23.5-4.7,47.8-7.2,72.8-7.2h48.1v48.1  C508.1,73.05,505.6,97.45,500.9,120.95z"></path></svg></span>
              <h2 class="u-align-center u-text u-text-default u-text-1">Algorand Network Status</h2>
              <p class="u-align-center u-text u-text-2">{{ NetworkStatus|cut:"\n"|cut:"{"|cut:"}" |safe }}</p>
              <a href="/"
                 class="u-btn u-btn-round u-button-style u-hover-palette-2-base u-palette-2-base u-radius-50 u-text-body-alt-color u-text-hover-white u-btn-1">Home</a>
              <p class="u-align-center u-text u-text-default u-text-3">&nbsp;I want to learn more about RewardsPay</p>
          </div>
          <button class="u-dialog-close-button u-icon u-text-grey-50 u-icon-2">
              <svg class="u-svg-link" preserveAspectRatio="xMidYMin slice" viewBox="0 0 413.348 413.348" style="">
                  <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#svg-5801"></use>
              </svg>
              <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1"
                   xml:space="preserve" class="u-svg-content" viewBox="0 0 413.348 413.348" id="svg-5801"><path d="m413.348 24.354-24.354-24.354-182.32 182.32-182.32-182.32-24.354 24.354 182.32 182.32-182.32 182.32 24.354 24.354 182.32-182.32 182.32 182.32 24.354-24.354-182.32-182.32z"></path></svg>
          </button>
      </div>

    </section>

    <!-- JS for ipfs file upload -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.js"></script>
    <script src="https://unpkg.com/ipfs-http-client@30.1.3/dist/index.js"></script>
    <script src="https://bundle.run/buffer@5.2.1"></script>
    <script>
        const ipfs = window.IpfsHttpClient('ipfs.infura.io', '5001', { protocol: 'https' });

        $("#upload").on("change", function() {
            var reader = new FileReader();
            reader.onload = function (e) {

                const magic_array_buffer_converted_to_buffer = buffer.Buffer(reader.result);
                ipfs.add(magic_array_buffer_converted_to_buffer, (err, result) => {
                    console.log(err, result);

              let ipfsLink = "<a href='https://gateway.ipfs.io/ipfs/" + result[0].hash + "'>gateway.ipfs.io/ipfs/" + result[0].hash + "</a>";
              document.getElementById("link").innerHTML = ipfsLink;

                })
            }
            reader.readAsArrayBuffer(this.files[0]);
        })
    </script>

  <! -- CSS for Pop Up -->
  <style>
  .u-section-4 {
      min-height: 973px;
  }

  .u-section-4 .u-dialog-1 {
      width: 983px;
      min-height: 590px;
      box-shadow: 2px 2px 8px 0 rgba(128, 128, 128, 1);
      background-image: linear-gradient(#f2f2f2, #e0e5eb);
      height: auto;
      margin: 29px calc(((100% - 1140px) / 2) + 58px) 60px auto;
  }

  .u-section-4 .u-container-layout-1 {
      padding: 40px 30px;
  }

  .u-section-4 .u-icon-1 {
      height: 64px;
      width: 64px;
      margin: 0 auto;
  }

  .u-section-4 .u-text-1 {
      font-size: 2.5rem;
      text-transform: uppercase;
      letter-spacing: 2px;
      margin: 20px auto 0;
  }

  .u-section-4 .u-text-2 {
      margin: 20px 0 0;
  }

  .u-section-4 .u-btn-1 {
      border-style: none;
      font-size: 1rem;
      background-image: none;
      font-weight: 700;
      margin: 20px auto 0;
      padding: 9px 47px 10px 46px;
  }

  .u-section-4 .u-text-3 {
      font-size: 0.75rem;
      margin: 20px auto 0;
  }

  .u-section-4 .u-icon-2 {
      width: 15px;
      height: 15px;
      left: auto;
      top: 17px;
      position: absolute;
      right: 16px;
  }

  @media (max-width: 1199px) {
      .u-section-4 .u-dialog-1 {
          width: 940px;
          margin-right: calc(((100% - 940px) / 2));
      }
  }

  @media (max-width: 991px) {
      .u-section-4 .u-dialog-1 {
          width: 720px;
          margin-right: calc(((100% - 720px) / 2));
      }

      .u-section-4 .u-container-layout-1 {
          padding-top: 30px;
          padding-bottom: 30px;
      }
  }

  @media (max-width: 767px) {
      .u-section-4 .u-dialog-1 {
          width: 540px;
          margin-right: calc(((100% - 540px) / 2));
      }

      .u-section-4 .u-container-layout-1 {
          padding-top: 45px;
      }
  }

  @media (max-width: 575px) {
      .u-section-4 .u-dialog-1 {
          width: 340px;
          min-height: 404px;
          margin-right: calc(((100% - 340px) / 2));
      }

      .u-section-4 .u-container-layout-1 {
          padding-top: 40px;
          padding-left: 25px;
          padding-right: 25px;
      }

      .u-section-4 .u-text-1 {
          font-size: 1.875rem;
          margin-top: 29px;
      }
  }</style>

  </body>
  {% endblock %}